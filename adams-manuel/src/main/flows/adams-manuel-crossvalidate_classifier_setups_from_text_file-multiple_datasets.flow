# Project: adams-manuel
# Date: 2014-04-26 18:51:26
# User: Manuel
# Based on adams-weka-crossvalidate_classifier_setups_from_text_file-multiple_datasets
adams.flow.control.Flow
	-annotation
	The flow loads classifier setups from a text file\n(one setup per line), updates them via the SetVariable\nactor in the GlobalActors\' \"Classifier\" actor and then\ncross-validates them on multiple datasets, outputting \nthe results of the CV.\nIn order to distinguish the results better from each other,\nthe classifier setup is output as comment (attaching the \n@{classifier} to the \"comment\" option in the EvaluationSummary\nactor).
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.source.WekaClassifierSetup
					-name
					WekaClassifier
					-classifier
						weka.classifiers.rules.ZeroR
	-actor
		adams.flow.source.FileSupplier
			-file
			${EXAMPLE_FLOWS}\data\wekaclassifier_setups.txt
	-actor
		adams.flow.transformer.TextFileReader
			-reader
				adams.data.io.input.LineByLineTextReader
	-actor
		adams.flow.transformer.SetVariable
			-var-name
			classifier
	-actor
		adams.flow.control.Trigger
			-tee
				adams.flow.source.DirectoryLister
					-dir
					${HOME}\prototype\datasets\classification
					-list-files
					true
					-regexp
					[a-zA-Z]*\\.arff
			-tee
				adams.flow.control.Tee
					-name
					get dataset name
					-tee
						adams.flow.transformer.BaseName
							-remove-extensions
							true
					-tee
						adams.flow.transformer.SetVariable
							-var-name
							dataset
			-tee
				adams.flow.control.Trigger
					-name
					generate entry string
					-tee
						adams.flow.source.CombineVariables
							-expression
							@{classifier} - @{dataset}
					-tee
						adams.flow.transformer.SetVariable
							-var-name
							entry
			-tee
				adams.flow.transformer.WekaFileReader
					-loader
						weka.core.converters.ArffLoader
			-tee
				adams.flow.transformer.WekaClassSelector
			-tee
				adams.flow.control.Continue
					-condition
						adams.flow.condition.bool.WekaCapabilities
							-capability
							NUMERIC_ATTRIBUTES
							-capability
							STRING_ATTRIBUTES
							-capability
							RELATIONAL_ATTRIBUTES
							-capability
							NUMERIC_CLASS
							-capability
							DATE_CLASS
							-capability
							STRING_CLASS
							-capability
							RELATIONAL_CLASS
			-tee
				adams.flow.transformer.WekaCrossValidationEvaluator
					-output
						weka.classifiers.evaluation.output.prediction.Null
					-classifier
					WekaClassifier
					-num-threads
					-1
			-tee
				adams.flow.control.Tee
					-tee
						adams.flow.control.Tee
							-name
							Accuracy
							-tee
								adams.flow.transformer.WekaEvaluationValuePicker
									-name
									Get accuracy
							-tee
								adams.flow.transformer.SetVariable
									-var-name
									accuracy
					-tee
						adams.flow.control.Tee
							-name
							RMSE
							-tee
								adams.flow.transformer.WekaEvaluationValuePicker
									-name
									Get RMSE
									-statistic
									ROOT_MEAN_SQUARED_ERROR
							-tee
								adams.flow.transformer.SetVariable
									-name
									SetVariable-1
									-var-name
									rmse
			-tee
				adams.flow.control.Trigger
					-name
					generate output
					-tee
						adams.flow.source.CombineVariables
							-expression
							@{classifier}, @{dataset}, @{accuracy}, @{rmse}
					-tee
						adams.flow.sink.DumpFile
							-output
							${HOME}\prototype\datasets\classification\results\summary.csv
							-append
							true
	-flow-execution-listener
		adams.flow.execution.NullListener

